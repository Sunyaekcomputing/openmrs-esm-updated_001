"use strict";(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[5696],{55696:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var i=n(1343),l=n.n(i),o=n(71123),r=n(83437),u=n(61357);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const s=function(t){var e,n,s,c=t.patientUuid,d=t.patient,m=t.clinicalFormsWorkspaceName,p=void 0===m?u.kt:m,f=t.closeWorkspace,v=t.closeWorkspaceWithSavedChanges,y=t.promptBeforeClosing,h=t.mutateForm,g=t.formInfo,S=g||{},b=S.encounterUuid,U=S.formUuid,k=S.visitStartDatetime,_=S.visitStopDatetime,W=S.visitTypeUuid,w=S.visitUuid,C=S.additionalProps,D=(0,u.WO)(c).currentVisit,T=(n=(0,i.useState)(!0),s=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,l,o=[],r=!0,u=!1;try{for(n=n.call(t);!(r=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);r=!0);}catch(t){u=!0,l=t}finally{try{r||null==n.return||n.return()}finally{if(u)throw l}}return o}}(n,s)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(n,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=T[0],A=T[1],x=(0,r.useConnectivity)(),F=(0,r.useVisit)(c).mutate,I=(0,o.iX)().mutate,O=(0,i.useMemo)((function(){var t,e,n,i,l;return{view:"form",formUuid:null!=U?U:null,visitUuid:null!==(e=null!=w?w:null==D?void 0:D.uuid)&&void 0!==e?e:null,visitTypeUuid:null!==(n=null!=W?W:null==D||null===(t=D.visitType)||void 0===t?void 0:t.uuid)&&void 0!==n?n:null,visitStartDatetime:null!==(i=null!=k?k:null==D?void 0:D.startDatetime)&&void 0!==i?i:null,visitStopDatetime:null!==(l=null!=_?_:null==D?void 0:D.stopDatetime)&&void 0!==l?l:null,isOffline:!x,patientUuid:null!=c?c:null,patient:d,encounterUuid:null!=b?b:null,closeWorkspace:function(){"function"==typeof h&&h(),f()},closeWorkspaceWithSavedChanges:function(){"function"==typeof h&&h(),F(),(0,u.Fg)(I,c),v()},promptBeforeClosing:y,additionalProps:C,clinicalFormsWorkspaceName:p}}),[C,p,f,v,null==D?void 0:D.startDatetime,null==D?void 0:D.stopDatetime,null==D?void 0:D.uuid,null==D||null===(e=D.visitType)||void 0===e?void 0:e.uuid,b,U,I,x,F,h,d,c,y,k,_,W,w]);return(0,i.useEffect)((function(){O.formUuid&&(A(!1),setTimeout((function(){A(!0)})))}),[O]),l().createElement("div",null,l().createElement(r.ExtensionSlot,{name:"visit-context-header-slot",state:{patientUuid:c}}),E&&g&&c&&d&&l().createElement(r.ExtensionSlot,{name:"form-widget-slot",state:O}))}}}]);